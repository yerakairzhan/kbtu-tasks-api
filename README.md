# Overview:
You are building a minimal backend service for a small development team.
The service manages tasks (issues / todos / tickets) that can be created, listed, and updated.

# Goal:
Build a small HTTP API using net/http with:

# Technical Requirements

## API Specification

**Port:** 8080

There are no strict limitations on project structure.

**Recommended approach:** keep handlers, middleware, and models separated if possible:
- JSON request/response handling
- Validation and proper HTTP status codes
- Middleware for authentication and logging
- In-memory storage (no database)

**Language:** Go  
**Port:** 8080  
**Frameworks:** ‚ùå None (standard library only)  
**Storage:** In-memory (slice or map)

## 1. GET /tasks

1. Get all tasks.

2. Response on success:

**200 OK**
```json
[ 
  {
    "id": 1,
    "title": "Write unit tests",
    "done": false
  }, 
  {
    "id": 2,
    "title": "Deploy service",
    "done": true
  }
  ... 
]
```

## 2. GET /tasks

1. Accepts query parameter:
   - `id` (integer)
   - Example: `/tasks?id=42`

2. Response on success:

**200 OK**
```json
{
  "id": 42,
  "title": "Write unit tests",
  "done": false
}
```

3. Response on missing or invalid id

**400 Bad Request**
```json
{ 
  "error": "invalid id"
}
```

4. Response if task does not exist

**404 Not Found**
```json
{ "error": "task not found" }
```

## 3. POST /tasks

1. Create new task.

2. Example of the Request Body:
```json
{ "title": "Write unit tests" }
```

**Rules:**
- `title` must be a non-empty string
- `id` is generated by the server
- `done` defaults to false

3. Responses:

**201 Created:**
```json
{
  "id": 1,
  "title": "Write unit tests",
  "done": false
}
```

**400 Bad Request**
```json
{ "error": "invalid title" }
```

## 4. PATCH /tasks?id=1

1. Update task status.

2. Request Body Example
```json
{
  "done": true
}
```

**Rules:**
- `id` is a required query parameter
- `done` must be boolean

3. Responses

**200 OK** should return the updated state of the task.
```json
{ "updated": true }
```

**400 Not Found**
```json
{ "error": "task not found" }
```

# Middleware (Required)

## API Key Middleware

**Header:** `X-API-KEY`  
**Valid value:** `secret12345` or create your own.

**If missing or invalid:**

**401 Unauthorized**
```json
{ "error": "unauthorized" }
```

**if valid:**
- request proceeds to handler

## Logging

**Behavior**

Log HTTP method + path for every request

**Example:**
```
2026-01-29T14:49:05 Post /tasks {{message}}
```

`"{{message}}"` is the custom message provided by your server

**Rules:**
- timestamp, http method, and endpoint name are required in your middleware's logs

# Definition Of Done

- `go run ./cmd/api` starts the server on `:8080`
- All endpoints:
  - return JSON only
  - use correct HTTP status codes
  - set `Content-Type: application/json`
- Middleware:
  - blocks requests without a valid API key
  - logs every request

# Deliverables

**Deadline:** 08.02.2026, Sunday 23:00

- Push all the changes to your Github repository
- Submit the link to this repository
- Submit [1-2]-minute demo video of your project. You can speed it up if it's too long

# Optional Features (Choose Freely)

Students may implement any number of the following to increase difficulty and engagement.

## üü¢ Easy
- Filtering:
  - `GET /tasks?done=true`
- Limit maximum title length
- More detailed error messages

## üü° Medium
- `DELETE /tasks?id=1`
- Request-ID middleware
- GET Request to the external APIs with parsing response to json.
  - https://jsonplaceholder.typicode.com/todos
- POST Request to the external API
  - https://jsonplaceholder.typicode.com/guide/
- Better project structure:
  - handlers
  - middleware
  - models
- Concurrency safety (`sync.Mutex`)

## üîµ Advanced
- Store tasks in `map[int]Task`

## üß† Extra (Exploration)
- Graceful shutdown (`context`, `os.Signal`)
- Unit tests for handlers
- Custom router (no third-party libraries)
- Storing the data in the database (any type)
- Rate limiting middleware
- API versioning (`/v1/tasks`)
- Multiple API keys or Full Basic/Bearer Authentication Flow
- API documentation using Swagger with the `/swagger` endpoint

Good luck! ‚ù§Ô∏è
